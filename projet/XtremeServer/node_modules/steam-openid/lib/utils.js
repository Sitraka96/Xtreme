"use strict";var _request=_interopRequireDefault(require("request"));Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,c[b])})}return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var Utils=/*#__PURE__*/function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"formArrayToObject",/*
    `formData` required to be an object { [name]: value, ... }
    https://www.npmjs.com/package/request#forms
  */value:function b(a){return a.reduce(function(a,b){var c=b.name,d=b.value;return _objectSpread({},a,_defineProperty({},c,d))},{})}},{key:"cloneRequestJar",value:function c(a){var b=a._jar;/* 
      There was a bug in `tough-cookie` https://github.com/salesforce/tough-cookie/issues/101,
      however `request` has not used the fixed version yet https://github.com/request/request/commit/670b563,
      so I use GitHub version `request/request#670b563`
    */ /*
      There is a bug in `tought-cookie` https://github.com/salesforce/tough-cookie/issues/147
      so I use `._cloneSync` instead of `.cloneSync`
    */return _request.default.jar(b._cloneSync().store)}/*
    This method created just to provide easy access to the cookies in the jar,
    however jar.toJSON().cookies can be used
  */},{key:"exportAllCookies",value:function e(a,b){if(!a.synchronous||!a.getAllCookies)throw new TypeError("".concat(a," is not synchronous store"));/*
      `tought-cookie` logic is awful: async(callback) function is really sync
    */var c,d=[];if(a.getAllCookies(function(a,b){return c=a,d=b}),c)throw c;return d.filter(function(a){var c=a.domain;return!b||b(c)}).reduce(function(a,b){return _objectSpread({},a,_defineProperty({},b.domain,[].concat(_toConsumableArray(a[b.domain]||[]),[b.cookieString()])))},{})}}]),a}();exports.default=Utils;